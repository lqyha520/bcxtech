# å¸ƒè‰èŠ¯ç§‘æŠ€å®˜ç½‘ - éƒ¨ç½²æ–‡æ¡£

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜å¦‚ä½•éƒ¨ç½²å¸ƒè‰èŠ¯ç§‘æŠ€å®˜ç½‘é¡¹ç›®åˆ°ç”Ÿäº§ç¯å¢ƒã€‚

## ğŸ“‹ ç›®å½•

- [éƒ¨ç½²å‰å‡†å¤‡](#éƒ¨ç½²å‰å‡†å¤‡)
- [ç¯å¢ƒå˜é‡é…ç½®](#ç¯å¢ƒå˜é‡é…ç½®)
- [æ„å»ºé¡¹ç›®](#æ„å»ºé¡¹ç›®)
- [éƒ¨ç½²æ–¹å¼](#éƒ¨ç½²æ–¹å¼)
  - [Vercelï¼ˆæ¨èï¼‰](#vercelæ¨è)
  - [è‡ªå·±çš„æœåŠ¡å™¨](#è‡ªå·±çš„æœåŠ¡å™¨)
  - [Docker éƒ¨ç½²](#docker-éƒ¨ç½²)
  - [å…¶ä»–å¹³å°](#å…¶ä»–å¹³å°)
- [éƒ¨ç½²åéªŒè¯](#éƒ¨ç½²åéªŒè¯)
- [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [ç›‘æ§å’Œç»´æŠ¤](#ç›‘æ§å’Œç»´æŠ¤)

---

## ğŸš€ éƒ¨ç½²å‰å‡†å¤‡

### 1. æ£€æŸ¥é¡¹ç›®ä¾èµ–

ç¡®ä¿é¡¹ç›®ä¾èµ–å·²æ­£ç¡®å®‰è£…ï¼š

```bash
npm install
```

### 2. æœ¬åœ°æµ‹è¯•

åœ¨éƒ¨ç½²å‰ï¼Œå…ˆåœ¨æœ¬åœ°æµ‹è¯•æ„å»ºï¼š

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨æµ‹è¯•
npm run start
```

è®¿é—® `http://localhost:3000` ç¡®è®¤ç½‘ç«™æ­£å¸¸è¿è¡Œã€‚

### 3. å‡†å¤‡å›¾ç‰‡èµ„æº

ç¡®ä¿ä»¥ä¸‹å›¾ç‰‡æ–‡ä»¶å·²æ·»åŠ åˆ° `public` ç›®å½•ï¼š

- âœ… `favicon.svg` - ç½‘ç«™å›¾æ ‡ï¼ˆå·²åˆ›å»ºï¼‰
- âœ… `icon.svg` - é€šç”¨å›¾æ ‡ï¼ˆå·²åˆ›å»ºï¼‰
- âœ… `og-image.svg` - OpenGraph å›¾ç‰‡ï¼ˆå·²åˆ›å»ºï¼‰
- âœ… `logo.svg` - Logoï¼ˆå·²åˆ›å»ºï¼‰
- âš ï¸ `favicon.ico` - ä¼ ç»Ÿ faviconï¼ˆå¯é€‰ï¼Œå»ºè®®ç”Ÿæˆï¼‰
- âš ï¸ `apple-touch-icon.png` - Apple è®¾å¤‡å›¾æ ‡ï¼ˆå¯é€‰ï¼Œå»ºè®®ç”Ÿæˆï¼‰
- âš ï¸ `og-image.jpg` - OpenGraph å›¾ç‰‡ JPG ç‰ˆæœ¬ï¼ˆå¯é€‰ï¼Œå»ºè®®ç”Ÿæˆï¼‰

> ğŸ’¡ æŸ¥çœ‹ `scripts/generate-favicons.md` äº†è§£å¦‚ä½•ç”Ÿæˆè¿™äº›å›¾ç‰‡ã€‚

### 4. ä»£ç æ£€æŸ¥

è¿è¡Œä»£ç æ£€æŸ¥ç¡®ä¿æ²¡æœ‰é”™è¯¯ï¼š

```bash
npm run lint
```

---

## ğŸ” ç¯å¢ƒå˜é‡é…ç½®

### å¿…éœ€çš„ç¯å¢ƒå˜é‡

åˆ›å»º `.env.local` æ–‡ä»¶ï¼ˆæœ¬åœ°å¼€å‘ï¼‰æˆ–åœ¨éƒ¨ç½²å¹³å°é…ç½®ç¯å¢ƒå˜é‡ï¼š

```env
# ç½‘ç«™ URLï¼ˆå¿…éœ€ï¼‰
NEXT_PUBLIC_SITE_URL=https://your-domain.com

# å…¶ä»–å¯é€‰ç¯å¢ƒå˜é‡
# NODE_ENV=production
```

### ç¯å¢ƒå˜é‡è¯´æ˜

| å˜é‡å | è¯´æ˜ | æ˜¯å¦å¿…éœ€ | é»˜è®¤å€¼ |
|--------|------|----------|--------|
| `NEXT_PUBLIC_SITE_URL` | ç½‘ç«™çš„å®Œæ•´ URLï¼Œç”¨äº SEO å’Œ OpenGraph | âœ… æ˜¯ | `https://bucaoxin.com` |
| `NODE_ENV` | ç¯å¢ƒæ¨¡å¼ï¼ˆproduction/developmentï¼‰ | âŒ å¦ | `production`ï¼ˆæ„å»ºæ—¶è‡ªåŠ¨è®¾ç½®ï¼‰ |

### åœ¨å„å¹³å°é…ç½®ç¯å¢ƒå˜é‡

#### Vercel
1. è¿›å…¥é¡¹ç›®è®¾ç½®
2. é€‰æ‹© "Environment Variables"
3. æ·»åŠ å˜é‡å¹¶é€‰æ‹©ç¯å¢ƒï¼ˆProduction, Preview, Developmentï¼‰
4. ä¿å­˜åé‡æ–°éƒ¨ç½²

#### è‡ªå·±çš„æœåŠ¡å™¨
åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»º `.env.production` æ–‡ä»¶ï¼š

```bash
# åœ¨æœåŠ¡å™¨ä¸Š
echo "NEXT_PUBLIC_SITE_URL=https://your-domain.com" > .env.production
```

#### Docker
åœ¨ `docker-compose.yml` æˆ– Dockerfile ä¸­é…ç½®ï¼š

```yaml
environment:
  - NEXT_PUBLIC_SITE_URL=https://your-domain.com
```

---

## ğŸ—ï¸ æ„å»ºé¡¹ç›®

### æœ¬åœ°æ„å»º

```bash
# å®‰è£…ä¾èµ–
npm install

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build
```

æ„å»ºæˆåŠŸåï¼Œä¼šç”Ÿæˆ `.next` ç›®å½•ï¼ŒåŒ…å«ä¼˜åŒ–åçš„ç”Ÿäº§ä»£ç ã€‚

### æ„å»ºè¾“å‡º

æ„å»ºå®Œæˆåï¼Œæ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š

- âœ… `.next` ç›®å½•å·²ç”Ÿæˆ
- âœ… æ²¡æœ‰æ„å»ºé”™è¯¯æˆ–è­¦å‘Š
- âœ… é™æ€èµ„æºå·²ä¼˜åŒ–
- âœ… å›¾ç‰‡å·²ä¼˜åŒ–ï¼ˆWebP/AVIFï¼‰

### æ„å»ºä¼˜åŒ–

é¡¹ç›®å·²é…ç½®ä»¥ä¸‹ä¼˜åŒ–ï¼š

- âœ… ä»£ç å‹ç¼©ï¼ˆSWC Minifyï¼‰
- âœ… ç”Ÿäº§ç¯å¢ƒç§»é™¤ console
- âœ… å›¾ç‰‡ä¼˜åŒ–ï¼ˆWebP/AVIFï¼‰
- âœ… é™æ€èµ„æºç¼“å­˜ç­–ç•¥
- âœ… å­—ä½“ä¼˜åŒ–ï¼ˆpreloadï¼‰

---

## ğŸš€ éƒ¨ç½²æ–¹å¼

### Vercelï¼ˆæ¨èï¼‰

Vercel æ˜¯ Next.js å®˜æ–¹æ¨èçš„éƒ¨ç½²å¹³å°ï¼Œæä¾›æœ€ä½³çš„æ€§èƒ½å’Œä½“éªŒã€‚

#### æ–¹å¼ä¸€ï¼šé€šè¿‡ Vercel Dashboard

1. **ç™»å½• Vercel**
   - è®¿é—® [vercel.com](https://vercel.com)
   - ä½¿ç”¨ GitHub/GitLab/Bitbucket è´¦å·ç™»å½•

2. **å¯¼å…¥é¡¹ç›®**
   - ç‚¹å‡» "Add New Project"
   - é€‰æ‹© GitHub ä»“åº“
   - ç‚¹å‡» "Import"

3. **é…ç½®é¡¹ç›®**
   - **Framework Preset**: Next.jsï¼ˆè‡ªåŠ¨æ£€æµ‹ï¼‰
   - **Root Directory**: `./`ï¼ˆé»˜è®¤ï¼‰
   - **Build Command**: `npm run build`ï¼ˆé»˜è®¤ï¼‰
   - **Output Directory**: `.next`ï¼ˆé»˜è®¤ï¼‰
   - **Install Command**: `npm install`ï¼ˆé»˜è®¤ï¼‰

4. **ç¯å¢ƒå˜é‡**
   - æ·»åŠ  `NEXT_PUBLIC_SITE_URL` ç¯å¢ƒå˜é‡
   - å€¼ä¸ºä½ çš„åŸŸåï¼Œå¦‚ï¼š`https://your-domain.com`

5. **éƒ¨ç½²**
   - ç‚¹å‡» "Deploy"
   - ç­‰å¾…æ„å»ºå®Œæˆï¼ˆé€šå¸¸ 1-3 åˆ†é’Ÿï¼‰

6. **è‡ªå®šä¹‰åŸŸå**
   - åœ¨é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ è‡ªå®šä¹‰åŸŸå
   - é…ç½® DNS è®°å½•
   - ç­‰å¾… SSL è¯ä¹¦è‡ªåŠ¨é…ç½®

#### æ–¹å¼äºŒï¼šé€šè¿‡ Vercel CLI

```bash
# å®‰è£… Vercel CLI
npm i -g vercel

# ç™»å½•
vercel login

# éƒ¨ç½²
vercel

# ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
vercel --prod
```

#### Vercel ä¼˜åŠ¿

- âœ… è‡ªåŠ¨ HTTPS
- âœ… å…¨çƒ CDN
- âœ… è‡ªåŠ¨éƒ¨ç½²ï¼ˆGit æ¨é€è§¦å‘ï¼‰
- âœ… é¢„è§ˆéƒ¨ç½²ï¼ˆæ¯ä¸ª PR è‡ªåŠ¨ç”Ÿæˆé¢„è§ˆé“¾æ¥ï¼‰
- âœ… æ€§èƒ½ç›‘æ§
- âœ… å…è´¹é¢åº¦å……è¶³

---

### è‡ªå·±çš„æœåŠ¡å™¨

#### ç³»ç»Ÿè¦æ±‚

- Node.js 18.17 æˆ–æ›´é«˜ç‰ˆæœ¬
- npm æˆ– yarn
- è‡³å°‘ 1GB RAM
- è‡³å°‘ 10GB ç£ç›˜ç©ºé—´

#### éƒ¨ç½²æ­¥éª¤

##### 1. å®‰è£… Node.js

```bash
# Ubuntu/Debian
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# CentOS/RHEL
curl -fsSL https://rpm.nodesource.com/setup_18.x | sudo bash -
sudo yum install -y nodejs

# éªŒè¯å®‰è£…
node --version
npm --version
```

##### 2. å…‹éš†é¡¹ç›®

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/your-username/bucaoxin-website.git
cd bucaoxin-website

# æˆ–ä¸Šä¼ é¡¹ç›®æ–‡ä»¶åˆ°æœåŠ¡å™¨
```

##### 3. å®‰è£…ä¾èµ–

```bash
npm install
```

##### 4. é…ç½®ç¯å¢ƒå˜é‡

```bash
# åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶
echo "NEXT_PUBLIC_SITE_URL=https://your-domain.com" > .env.production
```

##### 5. æ„å»ºé¡¹ç›®

```bash
npm run build
```

##### 6. ä½¿ç”¨ PM2 è¿è¡Œï¼ˆæ¨èï¼‰

```bash
# å®‰è£… PM2
npm install -g pm2

# å¯åŠ¨åº”ç”¨
pm2 start npm --name "bucaoxin-website" -- start

# è®¾ç½®å¼€æœºè‡ªå¯
pm2 startup
pm2 save

# æŸ¥çœ‹çŠ¶æ€
pm2 status

# æŸ¥çœ‹æ—¥å¿—
pm2 logs bucaoxin-website
```

##### 7. é…ç½® Nginx åå‘ä»£ç†

åˆ›å»º Nginx é…ç½®æ–‡ä»¶ `/etc/nginx/sites-available/bucaoxin-website`ï¼š

```nginx
server {
    listen 80;
    server_name your-domain.com www.your-domain.com;

    # é‡å®šå‘åˆ° HTTPS
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name your-domain.com www.your-domain.com;

    # SSL è¯ä¹¦é…ç½®ï¼ˆä½¿ç”¨ Let's Encryptï¼‰
    ssl_certificate /etc/letsencrypt/live/your-domain.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/your-domain.com/privkey.pem;

    # SSL é…ç½®
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;
    ssl_prefer_server_ciphers on;

    # ä»£ç†åˆ° Next.js
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }

    # é™æ€èµ„æºç¼“å­˜
    location /_next/static {
        proxy_pass http://localhost:3000;
        proxy_cache_valid 200 60m;
        add_header Cache-Control "public, immutable";
    }

    # Gzip å‹ç¼©
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types text/plain text/css text/xml text/javascript application/x-javascript application/xml+rss application/javascript application/json;
}
```

å¯ç”¨é…ç½®ï¼š

```bash
# åˆ›å»ºç¬¦å·é“¾æ¥
sudo ln -s /etc/nginx/sites-available/bucaoxin-website /etc/nginx/sites-enabled/

# æµ‹è¯•é…ç½®
sudo nginx -t

# é‡è½½ Nginx
sudo systemctl reload nginx
```

##### 8. é…ç½® SSL è¯ä¹¦ï¼ˆLet's Encryptï¼‰

```bash
# å®‰è£… Certbot
sudo apt-get install certbot python3-certbot-nginx

# è·å–è¯ä¹¦
sudo certbot --nginx -d your-domain.com -d www.your-domain.com

# è‡ªåŠ¨ç»­æœŸï¼ˆå·²è‡ªåŠ¨é…ç½®ï¼‰
sudo certbot renew --dry-run
```

##### 9. é…ç½®é˜²ç«å¢™

```bash
# Ubuntu/Debian (UFW)
sudo ufw allow 22/tcp
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw enable

# CentOS/RHEL (firewalld)
sudo firewall-cmd --permanent --add-service=ssh
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --reload
```

#### ä½¿ç”¨ systemdï¼ˆæ›¿ä»£ PM2ï¼‰

åˆ›å»ºæœåŠ¡æ–‡ä»¶ `/etc/systemd/system/bucaoxin-website.service`ï¼š

```ini
[Unit]
Description=Bucaoxin Website
After=network.target

[Service]
Type=simple
User=www-data
WorkingDirectory=/var/www/bucaoxin-website
Environment=NODE_ENV=production
Environment=NEXT_PUBLIC_SITE_URL=https://your-domain.com
ExecStart=/usr/bin/npm start
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

å¯ç”¨æœåŠ¡ï¼š

```bash
# é‡è½½ systemd
sudo systemctl daemon-reload

# å¯åŠ¨æœåŠ¡
sudo systemctl start bucaoxin-website

# è®¾ç½®å¼€æœºè‡ªå¯
sudo systemctl enable bucaoxin-website

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status bucaoxin-website
```

---

### Docker éƒ¨ç½²

#### åˆ›å»º Dockerfile

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `Dockerfile`ï¼š

```dockerfile
# ä½¿ç”¨å®˜æ–¹ Node.js è¿è¡Œæ—¶ä½œä¸ºåŸºç¡€é•œåƒ
FROM node:18-alpine AS base

# å®‰è£…ä¾èµ–é˜¶æ®µ
FROM base AS deps
WORKDIR /app

# å¤åˆ¶ package æ–‡ä»¶
COPY package.json package-lock.json* ./
RUN npm ci

# æ„å»ºé˜¶æ®µ
FROM base AS builder
WORKDIR /app
COPY --from=deps /app/node_modules ./node_modules
COPY . .

# è®¾ç½®ç¯å¢ƒå˜é‡
ENV NEXT_TELEMETRY_DISABLED 1
ENV NODE_ENV production

# æ„å»ºåº”ç”¨
RUN npm run build

# ç”Ÿäº§é•œåƒ
FROM base AS runner
WORKDIR /app

ENV NODE_ENV production
ENV NEXT_TELEMETRY_DISABLED 1

RUN addgroup --system --gid 1001 nodejs
RUN adduser --system --uid 1001 nextjs

# å¤åˆ¶æ„å»ºäº§ç‰©
COPY --from=builder /app/public ./public
COPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./
COPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static

USER nextjs

EXPOSE 3000

ENV PORT 3000
ENV HOSTNAME "0.0.0.0"

CMD ["node", "server.js"]
```

#### é…ç½® Next.js è¾“å‡º

åœ¨ `next.config.mjs` ä¸­æ·»åŠ  standalone è¾“å‡ºï¼š

```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  output: 'standalone', // æ·»åŠ è¿™ä¸€è¡Œ
  // ... å…¶ä»–é…ç½®
};

export default nextConfig;
```

#### åˆ›å»º .dockerignore

```
node_modules
.next
.git
.env*.local
*.log
.DS_Store
```

#### æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker build -t bucaoxin-website .

# è¿è¡Œå®¹å™¨
docker run -p 3000:3000 \
  -e NEXT_PUBLIC_SITE_URL=https://your-domain.com \
  bucaoxin-website
```

#### ä½¿ç”¨ Docker Compose

åˆ›å»º `docker-compose.yml`ï¼š

```yaml
version: '3.8'

services:
  website:
    build: .
    ports:
      - "3000:3000"
    environment:
      - NEXT_PUBLIC_SITE_URL=https://your-domain.com
      - NODE_ENV=production
    restart: unless-stopped
    volumes:
      - ./public:/app/public
```

è¿è¡Œï¼š

```bash
docker-compose up -d
```

---

### å…¶ä»–å¹³å°

#### Netlify

1. è¿æ¥åˆ° GitHub ä»“åº“
2. æ„å»ºå‘½ä»¤ï¼š`npm run build`
3. å‘å¸ƒç›®å½•ï¼š`.next`
4. æ·»åŠ ç¯å¢ƒå˜é‡ï¼š`NEXT_PUBLIC_SITE_URL`

#### Railway

1. è¿æ¥ GitHub ä»“åº“
2. è‡ªåŠ¨æ£€æµ‹ Next.js é¡¹ç›®
3. æ·»åŠ ç¯å¢ƒå˜é‡
4. è‡ªåŠ¨éƒ¨ç½²

#### Render

1. åˆ›å»ºæ–°çš„ Web Service
2. è¿æ¥ GitHub ä»“åº“
3. æ„å»ºå‘½ä»¤ï¼š`npm run build`
4. å¯åŠ¨å‘½ä»¤ï¼š`npm start`
5. æ·»åŠ ç¯å¢ƒå˜é‡

#### é˜¿é‡Œäº‘/è…¾è®¯äº‘/åä¸ºäº‘

1. ä½¿ç”¨äº‘æœåŠ¡å™¨ï¼ˆECSï¼‰
2. æŒ‰ç…§"è‡ªå·±çš„æœåŠ¡å™¨"éƒ¨ç½²æ­¥éª¤
3. é…ç½®äº‘ CDN åŠ é€Ÿ
4. ä½¿ç”¨äº‘æ•°æ®åº“ï¼ˆå¦‚éœ€è¦ï¼‰

---

## âœ… éƒ¨ç½²åéªŒè¯

### 1. åŠŸèƒ½æµ‹è¯•

- [ ] é¦–é¡µæ­£å¸¸åŠ è½½
- [ ] æ‰€æœ‰é¡µé¢å¯ä»¥è®¿é—®
- [ ] å¯¼èˆªèœå•æ­£å¸¸å·¥ä½œ
- [ ] ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½æ­£å¸¸
- [ ] è¡¨å•æäº¤åŠŸèƒ½æ­£å¸¸ï¼ˆå¦‚å·²é…ç½®ï¼‰
- [ ] ç§»åŠ¨ç«¯å“åº”å¼æ­£å¸¸
- [ ] å›¾ç‰‡æ­£å¸¸åŠ è½½
- [ ] åŠ¨ç”»æ•ˆæœæ­£å¸¸

### 2. SEO éªŒè¯

- [ ] è®¿é—® `/sitemap.xml` æŸ¥çœ‹ç«™ç‚¹åœ°å›¾
- [ ] è®¿é—® `/robots.txt` æŸ¥çœ‹çˆ¬è™«è§„åˆ™
- [ ] ä½¿ç”¨ Google Search Console éªŒè¯
- [ ] ä½¿ç”¨ä»¥ä¸‹å·¥å…·æµ‹è¯• OpenGraphï¼š
  - https://www.opengraph.xyz/
  - https://developers.facebook.com/tools/debug/
  - https://cards-dev.twitter.com/validator

### 3. æ€§èƒ½æµ‹è¯•

ä½¿ç”¨ä»¥ä¸‹å·¥å…·æµ‹è¯•æ€§èƒ½ï¼š

- [Google PageSpeed Insights](https://pagespeed.web.dev/)
- [GTmetrix](https://gtmetrix.com/)
- [WebPageTest](https://www.webpagetest.org/)

### 4. å®‰å…¨æ£€æŸ¥

- [ ] HTTPS è¯ä¹¦æ­£å¸¸
- [ ] å®‰å…¨å¤´é…ç½®æ­£ç¡®
- [ ] æ²¡æœ‰æ§åˆ¶å°é”™è¯¯
- [ ] æ²¡æœ‰å®‰å…¨æ¼æ´

---

## âš¡ æ€§èƒ½ä¼˜åŒ–

### 1. å¯ç”¨ CDN

ä½¿ç”¨ CDN åŠ é€Ÿé™æ€èµ„æºï¼š

- Cloudflare
- é˜¿é‡Œäº‘ CDN
- è…¾è®¯äº‘ CDN

### 2. å›¾ç‰‡ä¼˜åŒ–

- ä½¿ç”¨ Next.js Image ç»„ä»¶
- å¯ç”¨ WebP/AVIF æ ¼å¼
- ä½¿ç”¨é€‚å½“çš„å›¾ç‰‡å°ºå¯¸
- å¯ç”¨æ‡’åŠ è½½

### 3. ç¼“å­˜ç­–ç•¥

é¡¹ç›®å·²é…ç½®ä»¥ä¸‹ç¼“å­˜ï¼š

- é™æ€èµ„æºï¼šé•¿æœŸç¼“å­˜ï¼ˆ1å¹´ï¼‰
- HTMLï¼šçŸ­æœŸç¼“å­˜ï¼ˆ1å°æ—¶ï¼‰
- APIï¼šæ ¹æ®éœ€æ±‚é…ç½®

### 4. å‹ç¼©

- å¯ç”¨ Gzip/Brotli å‹ç¼©
- ä»£ç å‹ç¼©ï¼ˆå·²é…ç½®ï¼‰
- å›¾ç‰‡å‹ç¼©ï¼ˆå·²é…ç½®ï¼‰

---

## â“ å¸¸è§é—®é¢˜

### 1. æ„å»ºå¤±è´¥

**é—®é¢˜**: `npm run build` å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ¸…ç†ç¼“å­˜
rm -rf .next node_modules package-lock.json

# é‡æ–°å®‰è£…ä¾èµ–
npm install

# é‡æ–°æ„å»º
npm run build
```

### 2. ç¯å¢ƒå˜é‡ä¸ç”Ÿæ•ˆ

**é—®é¢˜**: ç¯å¢ƒå˜é‡åœ¨æ„å»ºåä¸ç”Ÿæ•ˆ

**è§£å†³æ–¹æ¡ˆ**:
- ç¡®ä¿å˜é‡åä»¥ `NEXT_PUBLIC_` å¼€å¤´ï¼ˆå®¢æˆ·ç«¯å˜é‡ï¼‰
- é‡æ–°æ„å»ºé¡¹ç›®
- æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®é…ç½®

### 3. å›¾ç‰‡ä¸æ˜¾ç¤º

**é—®é¢˜**: å›¾ç‰‡åŠ è½½å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥å›¾ç‰‡è·¯å¾„æ˜¯å¦æ­£ç¡®
- ç¡®ä¿å›¾ç‰‡æ–‡ä»¶åœ¨ `public` ç›®å½•
- æ£€æŸ¥ Next.js å›¾ç‰‡é…ç½®
- æ£€æŸ¥ CDN é…ç½®ï¼ˆå¦‚ä½¿ç”¨ï¼‰

### 4. æ ·å¼ä¸ç”Ÿæ•ˆ

**é—®é¢˜**: Tailwind CSS æ ·å¼ä¸æ˜¾ç¤º

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ¸…ç†ç¼“å­˜
rm -rf .next

# é‡æ–°æ„å»º
npm run build
```

### 5. ç«¯å£è¢«å ç”¨

**é—®é¢˜**: ç«¯å£ 3000 å·²è¢«å ç”¨

**è§£å†³æ–¹æ¡ˆ**:
```bash
# ä¿®æ”¹ç«¯å£
PORT=3001 npm start

# æˆ–åœ¨ç¯å¢ƒå˜é‡ä¸­è®¾ç½®
export PORT=3001
```

### 6. PM2 è¿›ç¨‹å´©æºƒ

**é—®é¢˜**: PM2 è¿›ç¨‹é¢‘ç¹é‡å¯

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æŸ¥çœ‹æ—¥å¿—
pm2 logs bucaoxin-website

# æ£€æŸ¥å†…å­˜ä½¿ç”¨
pm2 monit

# å¢åŠ å†…å­˜é™åˆ¶ï¼ˆå¦‚éœ€è¦ï¼‰
pm2 start npm --name "bucaoxin-website" -- start --max-memory-restart 1G
```

### 7. SSL è¯ä¹¦é—®é¢˜

**é—®é¢˜**: SSL è¯ä¹¦é”™è¯¯æˆ–è¿‡æœŸ

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ›´æ–° Let's Encrypt è¯ä¹¦
sudo certbot renew

# é‡å¯ Nginx
sudo systemctl restart nginx
```

---

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### 1. æ—¥å¿—ç›‘æ§

#### PM2 æ—¥å¿—

```bash
# æŸ¥çœ‹å®æ—¶æ—¥å¿—
pm2 logs bucaoxin-website

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
pm2 logs bucaoxin-website --err

# æ¸…ç†æ—¥å¿—
pm2 flush
```

#### systemd æ—¥å¿—

```bash
# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
sudo journalctl -u bucaoxin-website -f

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
sudo journalctl -u bucaoxin-website -p err
```

### 2. æ€§èƒ½ç›‘æ§

#### ä½¿ç”¨ Vercel Analytics

å¦‚æœä½¿ç”¨ Vercelï¼Œå¯ä»¥å¯ç”¨ Analyticsï¼š

1. åœ¨ Vercel Dashboard å¯ç”¨ Analytics
2. æŸ¥çœ‹æ€§èƒ½æŒ‡æ ‡
3. åˆ†æç”¨æˆ·è¡Œä¸º

#### ä½¿ç”¨ç¬¬ä¸‰æ–¹ç›‘æ§

- [Sentry](https://sentry.io/) - é”™è¯¯ç›‘æ§
- [LogRocket](https://logrocket.com/) - ä¼šè¯é‡æ”¾
- [Google Analytics](https://analytics.google.com/) - ç½‘ç«™åˆ†æ

### 3. å®šæœŸç»´æŠ¤

#### æ›´æ–°ä¾èµ–

```bash
# æ£€æŸ¥è¿‡æ—¶çš„ä¾èµ–
npm outdated

# æ›´æ–°ä¾èµ–
npm update

# æ›´æ–° Next.js
npm install next@latest
```

#### å¤‡ä»½

å®šæœŸå¤‡ä»½ï¼š

- ä»£ç ä»“åº“ï¼ˆGitï¼‰
- æ•°æ®åº“ï¼ˆå¦‚æœ‰ï¼‰
- é…ç½®æ–‡ä»¶
- ç¯å¢ƒå˜é‡

#### å®‰å…¨æ›´æ–°

- å®šæœŸæ›´æ–°ç³»ç»Ÿ
- æ›´æ–° Node.js ç‰ˆæœ¬
- æ›´æ–°ä¾èµ–åŒ…
- æ£€æŸ¥å®‰å…¨æ¼æ´ï¼š`npm audit`

### 4. ç›‘æ§æŒ‡æ ‡

å…³æ³¨ä»¥ä¸‹æŒ‡æ ‡ï¼š

- å“åº”æ—¶é—´
- é”™è¯¯ç‡
- å†…å­˜ä½¿ç”¨
- CPU ä½¿ç”¨
- ç£ç›˜ç©ºé—´
- å¸¦å®½ä½¿ç”¨

---

## ğŸ“ éƒ¨ç½²æ¸…å•

éƒ¨ç½²å‰æ£€æŸ¥ï¼š

- [ ] ä»£ç å·²æäº¤åˆ° Git ä»“åº“
- [ ] ç¯å¢ƒå˜é‡å·²é…ç½®
- [ ] æœ¬åœ°æ„å»ºæµ‹è¯•é€šè¿‡
- [ ] å›¾ç‰‡èµ„æºå·²å‡†å¤‡
- [ ] åŸŸåå·²é…ç½®
- [ ] SSL è¯ä¹¦å·²é…ç½®ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] DNS è®°å½•å·²é…ç½®
- [ ] é˜²ç«å¢™è§„åˆ™å·²é…ç½®
- [ ] ç›‘æ§å·²è®¾ç½®
- [ ] å¤‡ä»½ç­–ç•¥å·²åˆ¶å®š

---

## ğŸ”— ç›¸å…³é“¾æ¥

- [Next.js éƒ¨ç½²æ–‡æ¡£](https://nextjs.org/docs/deployment)
- [Vercel æ–‡æ¡£](https://vercel.com/docs)
- [PM2 æ–‡æ¡£](https://pm2.keymetrics.io/docs/)
- [Nginx æ–‡æ¡£](https://nginx.org/en/docs/)
- [Docker æ–‡æ¡£](https://docs.docker.com/)

---

## ğŸ’¡ æœ€ä½³å®è·µ

1. **ä½¿ç”¨ CI/CD**: è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹
2. **ç¯å¢ƒåˆ†ç¦»**: å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒåˆ†ç¦»
3. **ç‰ˆæœ¬æ§åˆ¶**: ä½¿ç”¨ Git ç®¡ç†ä»£ç 
4. **ç›‘æ§å‘Šè­¦**: è®¾ç½®ç›‘æ§å’Œå‘Šè­¦
5. **å®šæœŸå¤‡ä»½**: å®šæœŸå¤‡ä»½é‡è¦æ•°æ®
6. **å®‰å…¨æ›´æ–°**: åŠæ—¶æ›´æ–°å®‰å…¨è¡¥ä¸
7. **æ€§èƒ½ä¼˜åŒ–**: æŒç»­ä¼˜åŒ–æ€§èƒ½
8. **æ–‡æ¡£ç»´æŠ¤**: ä¿æŒæ–‡æ¡£æ›´æ–°

---

## ğŸ†˜ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„å¸¸è§é—®é¢˜éƒ¨åˆ†
2. æ£€æŸ¥ Next.js å®˜æ–¹æ–‡æ¡£
3. æŸ¥çœ‹é¡¹ç›® Issues
4. è”ç³»æŠ€æœ¯æ”¯æŒ

---

**æœ€åæ›´æ–°**: 2024å¹´
**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0

